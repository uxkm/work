var activeDialogError=!0,______excelGrid______,______list______,______listCount______=0;!function($){$.equals=function(x,y){return JSON.stringify(x)===JSON.stringify(y)};var getAcrobatInfo=function(){var getBrowserName=function(){return this.name=this.name||((userAgent=navigator?navigator.userAgent.toLowerCase():"other").indexOf("chrome")>-1?"chrome":userAgent.indexOf("safari")>-1?"safari":userAgent.indexOf("msie")>-1||userAgent.indexOf("trident")>-1?"ie":userAgent.indexOf("firefox")>-1?"firefox":userAgent);var userAgent},getActiveXObject=function(name){try{return new ActiveXObject(name)}catch(e){}},getNavigatorPlugin=function(name){for(key in navigator.plugins){var plugin=navigator.plugins[key];if(plugin.name==name)return plugin}},getPDFPlugin=function(){return this.plugin=this.plugin||("ie"==getBrowserName()?getActiveXObject("AcroPDF.PDF")||getActiveXObject("PDF.PdfCtrl"):getNavigatorPlugin("Adobe Acrobat")||getNavigatorPlugin("Chrome PDF Viewer")||getNavigatorPlugin("WebKit built-in PDF"))},isAcrobatInstalled=function(){return!!getPDFPlugin()},getAcrobatVersion=function(){try{var plugin=getPDFPlugin();if("ie"==getBrowserName()){var versions,latest=plugin.GetVersions().split(",")[0].split("=");return parseFloat(latest[1])}return plugin.version?parseInt(plugin.version):plugin.name}catch(e){return null}};return{browser:getBrowserName(),acrobat:!!isAcrobatInstalled()&&"installed",acrobatVersion:getAcrobatVersion()}};$.fn.getDataSet=function(){return $(this).serializeObject()},$.fn.serializeObject=function(variable){var object={},array,prefix=variable?variable+".":"";return $(this).find("input, select, textarea").each((function(){if(!this.name)return!0;var name=prefix+this.name;if("checkbox"==$(this).prop("type")){var value="N";return $(this).is(":checked")?value=this.value:$(this).data("unchecked")&&(value=$(this).data("unchecked")),object[this.name],object[name]=value,!0}if("radio"==$(this).prop("type"))return $(this).is(":checked")&&(object[name]=this.value),!0;if("SELECT"==$(this).prop("tagName")&&$(this).prop("multiple")){var name=prefix+this.name,values={},i=0;return $.each($(this).val(),(function(idx,value){values[name+"["+i+"]"]=value,i++})),$.extend(object,values),!0}($(this).hasClass("num")||$(this).hasClass("num2"))&&(this.value=this.value.replace(/,/g,""));var name=prefix+this.name;void 0!==object[name]?(object[name].push||(object[name]=[object[name]]),object[name].push(this.value||"")):object[name]=this.value||""})),object},$.fn.serializeFile=function(paramName){var fileArea=$(this),dataCount=0,rowCount=0,formData=new FormData,storage=fileArea.data("storage"),referenceKey=fileArea.data("referenceKey"),fileId=fileArea.data("fileId"),ext=fileArea.data("ext"),extErr="N";""==fileId&&$(this)[0].dataset.fileId&&(fileId=$(this)[0].dataset.fileId),fileId&&formData.append("id",fileId),referenceKey&&formData.append("referenceKey",referenceKey),fileArea.find('input[type="file"]').length>0&&fileArea.find('input[type="file"]').each((function(idx){var type,style;$.isNull(ext)||$.isNull($(this)[0].files[0])||$(this)[0].files[0].type.indexOf(ext)<0&&(extErr="Y");if("N"!=extErr)return!1;void 0!==$(this).parent().parent()[0].attributes.style?$(this).parent().parent()[0].attributes.style.value.indexOf("display: none")<0&&(formData.append("uploadfile["+idx+"]",$(this)[0].files[0]),dataCount++):(formData.append("uploadfile["+idx+"]",$(this)[0].files[0]),dataCount++)}));var object=$(this).find(".file-set"),objectChildOption,objectChildFileSize;for(rowCount=0,i=0;i<object.length;i++)objectChildOption=object[i].style.display,objectChildFileSize=object[i].children[2].innerText,"none"!=objectChildOption?rowCount++:""!=objectChildFileSize&&(formData.append("deleteFiles",fileId+";"+object[i].dataset.fileSeq),dataCount++);return formData.append("others",storage),{data:formData,paramName:paramName,rowCount:rowCount,dataCount:dataCount,extErr:extErr,fileId:fileId}},$.convertJsonList=function(fieldName,data){var i=0,dataSet={};return $.each(data,(function(idx,list){$.each(list,(function(field,value){void 0!==value&&""!==value&&(dataSet[fieldName+"["+i+"]."+field]=value)})),i++})),dataSet},$.downFile=function(fileId,fileSeq){location.href="/files/"+fileId+"/"+fileSeq+"/download"},$.fn.loadFile=function(fileId,params,callback){var url="/files/"+fileId+"/all";if(fileId&&"object"==typeof fileId){if(!fileId.referKey)return;url="/files/reference/"+fileId.referKey+"/all"}var table=$(this).children("table"),fileForm=$(this),fileId;"function"==typeof params&&(callback=params,params=null);var table,tbody=(table=fileForm.find(".file-list")).find("tbody"),length;tbody.html(""),$.get(url,params,(function(data){$.each(data,(function(key,value){fileId=value.id,length=moment().format("YYYYMMDDhhmmss")+table.find(".mercury-file-row").length;var template='<tr style="height: auto;" class="file-set mercury-file-row"  data-file-seq="'+value.backNumber+'">';template+='<td style="vertical-align:middle;"><div class="check txt_center" style="padding-left: 2px;padding-top: 2px;"><input id="checkbox-'+length+'" class="checkbox-custom file-check" name="checkbox-'+length+'" type="checkbox" ><label for="checkbox-'+length+'" class="checkbox-custom-label"></div></td>',template+='<td><button class="btn btn-sm btn-primary down-file-li">'+old.js.common.button.down+"</button><span>"+value.originalFilename+"</span></td>",template+='<td align="right">'+$.number(Math.round(value.fileSize/1024))+" KB</td>",template+="</tr>",tbody.append(template)})),fileForm.attr("data-file-id",fileId),callback&&callback(data)}))},$.fn.editable=function(disabled,buttonType){var newButton=!0,removeButton=!0,fileForm=$(this);void 0===disabled&&(disabled=!1),"N"==buttonType&&(removeButton=!1),"R"==buttonType&&(newButton=!1),newButton&&fileForm.children(".new-file-input").prop("disabled",!disabled),removeButton&&fileForm.children(".remove-file").prop("disabled",!disabled)};var _datePickerOptions={dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,showOn:"button",buttonText:'<i class="fa fa-calendar fa-fw"></i>',minDate:"1900-01-01",maxDate:"2999-12-31",prevText:common.month.prev,nextText:common.month.next,monthNames:[common.month.month1,common.month.month2,common.month.month3,common.month.month4,common.month.month5,common.month.month6,common.month.month7,common.month.month8,common.month.month9,common.month.month10,common.month.month11,common.month.month12],monthNamesShort:[common.month.month1,common.month.month2,common.month.month3,common.month.month4,common.month.month5,common.month.month6,common.month.month7,common.month.month8,common.month.month9,common.month.month10,common.month.month11,common.month.month12],dayNames:[common.day.sun,common.day.mon,common.day.tue,common.day.wed,common.day.thu,common.day.fri,common.day.sat],dayNamesShort:[common.day.sun,common.day.mon,common.day.tue,common.day.wed,common.day.thu,common.day.fri,common.day.sat],dayNamesMin:[common.day.sun,common.day.mon,common.day.tue,common.day.wed,common.day.thu,common.day.fri,common.day.sat],weekHeader:biz.date.week},_weekOption={showWeek:!0,firstDay:0};function elementBind(element,value){"checkbox"!=$(element).attr("type")?$(element).val(value):$(element).val()==value?$(element).prop("checked",!0):$(element).prop("checked",!1)}function loadApprovalSearchCondition(callback){var mainGroup=null,searchForm=document.getElementById("searchForm"),approvalId=window.location.search.replace("?","").split("=")[1];if($.isNull(searchForm))callback&&callback();else{for(var i=0;i<searchForm.childElementCount;i++)if(searchForm.children[i].className.indexOf("main-group")>-1){mainGroup=searchForm.children[i];break}if(null!==mainGroup){var obj=new Object;obj.url=window.location.pathname+window.location.search,______list______=new Array,$.getSync("/sys/menu/sysMenu/approval/getSysApprovalSearchList",obj,(function(result){result.length>0&&(______list______=[],$.extend(______list______,result),findChildHasId(mainGroup,"LOAD"),______list______=null),callback&&callback()}))}else callback&&callback()}}function loadRecentSearchCondition(callback){var mainGroup=null,searchForm=document.getElementById("searchForm");if($.isNull(searchForm))callback&&callback();else{for(var i=0;i<searchForm.childElementCount;i++)if(searchForm.children[i].className.indexOf("main-group")>-1){mainGroup=searchForm.children[i];break}if(null!==mainGroup){var obj=new Object;obj.url=window.location.pathname,______list______=new Array,$.getSync("/sys/menu/sysMenu/recent/getSysMyRecentSearchList",obj,(function(result){result.length>0&&(______list______=[],$.extend(______list______,result),findChildHasId(mainGroup,"LOAD"),______list______=null),callback&&callback()}))}else callback&&callback()}}function findChildHasId(element,mode){if(element.childElementCount>0)for(var i=0;i<element.childElementCount;i++){if(!$.isNull(element.id)){pushItems(element,mode);break}findChildHasId(element.children[i],mode)}else findBroHasId(element,mode)}function findBroHasId(element,mode){$.isNull(element.id)||pushItems(element,mode),$.isNull(element.nextSibling)||findBroHasId(element.nextSibling,mode)}function pushItems(element,mode){if("SAVE"==mode){for(var dup=!1,i=0;i<______listCount______;i++)if(______list______["sysMyRecentSearchList["+i+"].id"]==element.id){dup=!0;break}dup||$.isNull(element.id)||(______list______["sysMyRecentSearchList["+______listCount______+"].id"]=element.id,______list______["sysMyRecentSearchList["+______listCount______+"].value"]=element.value,______listCount______++)}else for(var i=0;i<______list______.length;i++){if(element.id==______list______[i].id){if(element.value=______list______[i].value,"SELECT"==element.nodeName.toUpperCase()){var tempName="#"+element.id;$(tempName).trigger("change")}break}"selectedTabId"==______list______[i].id&&$('.nav-tabs a[href="'+______list______[i].value+'"]').click()}}function s2ab(s){for(var buf=new ArrayBuffer(s.length),view=new Uint8Array(buf),i=0;i<s.length;i++)view[i]=255&s.charCodeAt(i);return buf}$.fn.lDatepicker=function(options){options||(options={});var callback=$(this).data("callback");if($.extend(options,_datePickerOptions),$.extend(options,old.js.common.datepicker),$(this).prop("readonly",!1),$(this).prop("readonly")&&$(this).prop("readonly",!0),void 0===$(this).data("week")||1==$(this).data("week")){var format="YYYY - W";$(this).data("format")&&(format=$(this).data("format")),$.extend(options,_weekOption),1!=$(this).data("week")||$(this).hasClass("date-range")||$.extend(options,{onSelect:function(dateText,inst){var value=moment(dateText,"YYYY-MM-DD").format(format);if(format.indexOf("W")>-1){var date=new Date(dateText);value=moment(date.getFullYear()+"-"+moment(date).week(),"YYYY-W").format(format)}$(this).data("format")||(value+=old.js.common.datepicker.weekName),$(this).val(value),callback&&window[callback](value)}})}if($(this).data("timeFormat")&&!$(this).hasClass("date-range")){var insFormat=$(this).data("timeFormat");$.extend(options,{onSelect:function(dateText,inst){var nowDate=moment(),tempDate;moment(nowDate,"YYYY-MM-DD").format("YYYY-MM-DD")==dateText?$(this).val(moment(nowDate,"YYYY-MM-DD").format("YYYY-MM-DD "+insFormat)):"hh:mm:ss"==insFormat?$(this).val(moment(dateText,"YYYY-MM-DD hh-mm-ss").format("YYYY-MM-DD 00:00:00")):"hh:mm"==insFormat?$(this).val(moment(dateText,"YYYY-MM-DD hh-mm-ss").format("YYYY-MM-DD 00:00")):"hh"==insFormat&&$(this).val(moment(dateText,"YYYY-MM-DD hh-mm-ss").format("YYYY-MM-DD 00"))}})}return $(this).datepicker(options)},$.fn.lDaterange=function(options){var pairDateform,dateOption;options||(options={}),$.extend(options,_datePickerOptions),$.extend(options,old.js.common.datepicker),$(this).prop("readonly",!0),$(this).data("format")&&$(this).prop("readonly",!1),$(this).data("to")?(pairDateform=$(this).data("to"),dateOption="minDate"):$(this).data("from")&&(pairDateform=$(this).data("from"),dateOption="maxDate"),$(this).data("week")&&"false"==$(this).data("week")||$.extend(options,_weekOption),$(this).lDatepicker().on("change",(function(){$("#"+pairDateform).datepicker("option",dateOption,$.datepicker.parseDate(options.dateFormat,this.value))}))},$.fn.lTimepicker=function(options){$(this).timepicker(options)},$(".week-picker .ui-datepicker-calendar tr").on("mousemove",(function(){$(this).find("td a").addClass("ui-state-hover")})),$(".week-picker .ui-datepicker-calendar tr").on("mouseleave",(function(){$(this).find("td a").removeClass("ui-state-hover")})),$(document).on("click",".ui-datepicker-week-col",(function(){$(this).parents("tr").children("td").each((function(){if($(this).data("handler"))return $(this).click(),!1}))})),$.getSync=function(url,data,callback){$.isFunction(data)&&(callback=data,data={}),$.ajax({url:url,type:"GET",data:data,async:!1,success:callback})},$.getHtml=function(url,data,callback){$.isFunction(data)&&(callback=data,data={}),setTimeout((function(){$.ajax({url:url,type:"GET",data:data,dataType:"text",async:!0,success:callback})}),50)},$.fn.select=function(textField,valueField,data,defaultOption){var selectBox=$(this);$(selectBox).empty(),defaultOption&&$(selectBox).append("<option value="+defaultOption.value+" selected>"+defaultOption.text+"</option>"),$.each(data,(function(key,value){$(selectBox).append("<option value="+value[valueField]+">"+value[textField]+"</option>")}))},$.fn.load=function(url,param,callback,options){"object"==typeof callback&&(options=callback,callback=null),$.get(url,param,(function(data){$(this).formBind(data,options),callback&&callback(data)}))},$.fn.formClear=function(){$(this).find("select, input, textarea, .data-bind").each((function(){"SELECT, INPUT, TEXTAREA".indexOf($(this).prop("tagName"))>-1?"RADIO, radio".indexOf($(this).prop("type"))>-1?$(this)[0].checked=!1:elementBind($(this),""):$(this).html("")}))},$.fn.formBind=function(data,callback,options){$(this).validClear(),"object"==typeof callback&&(options=callback,callback=null);var area=$(this);$.each(data,(function(key,value){$(area).find("input[name="+key+"], select[name="+key+"], textarea[name="+key+"]").each((function(){if("RADIO, radio".indexOf($(this).prop("type"))>-1){var radio=$(this),radioName=$(this).prop("name"),radioValue=$(this).prop("value");$(area).find("input[name="+key+"], select[name="+key+"], textarea[name="+key+"]").each((function(){if("HIDDEN, hidden".indexOf($(this).prop("type"))>-1&&$(this).prop("value")==radioValue&&$(this).prop("name")==radioName)return radio[0].checked=!0,!1}))}else elementBind($(this),value)})),$(area).find("."+key).each((function(){"SELECT, INPUT, TEXTAREA".indexOf($(this).prop("tagName"))>-1?elementBind($(this),value):$(this).html(value)}))})),$.number(),$.numberFormat(),callback&&callback(data)},$.rest=function(url,data,callback,type,processData,method){$.isFunction(data)&&(processData=processData||type,type=callback,callback=data,data={});var options={url:url,type:method,success:callback,data:data};return void 0!==type&&null!=type&&$.extend(options,{contentType:type}),void 0!==processData&&null!=processData&&$.extend(options,{processData:processData}),$.ajax(options)},$.put=function(url,data,callback,type){return $.rest(url,data,callback,type,!0,"PUT")},$.delete=function(url,data,callback,type){return $.rest(url,data,callback,type,!0,"DELETE")},$.postFile=function(url,data,callback){return $.rest(url,data,callback,!1,!1,"POST")},$.save=function(url,data,file,callback,method){if("function"==typeof file&&(callback=file,file=null),data&&delete data.Sd,method||(method="POST"),file&&file.dataCount>0){var fileUrl="/files",paramName="fileBuckets",fileCount=null,deleteFileCount=0;0==file.rowCount&&(file.fileId=""),file.paramName&&(paramName=file.paramName),$.postFile(fileUrl,file.data,(function(result){var params={};fileCount=result.length,$.extend(params,data),result&&fileCount>0&&(result[0]&&$.extend(params,{fileId:result[0].id}),$.each(result,(function(idx,value){delete value.loginUser,1==value.deleted&&deleteFileCount++})),fileCount==deleteFileCount&&(void 0===file.rowCount||null==file.rowCount?delete params.fileId:file.rowCount<1&&delete params.fileId),$.extend(params,$.convertJsonList(paramName,result))),null!=url?$.rest(url,params,callback,null,!0,method):method&&method(result)}))}else file&&0==file.dataCount&&file.rowCount>0&&(data.fileId=file.fileId),$.rest(url,data,callback,null,!0,method)},$.excel=function(url,file,callback){"function"==typeof file&&(callback=file,file=url,url=null),"string"!=typeof url&&(url="/api/excels"),$.postFile(url,file.data,callback)},$.excelOne=function(url,file,callback){"function"==typeof file&&(callback=file,file=url,url=null),"string"!=typeof url&&(url="/api/excels/single"),$.excel(url,file,callback)},$.excelUpload=function(grid,callback){var rowNum=0,formData=new FormData;formData.append("id",moment().format("YYYY_MM_DD_HH_mm_ss")),formData.append("uploadfile[0]",event.target.files[0]),formData.append("others","EXCEL");var input=event.target;______excelGrid______=grid;var reader=new FileReader;reader.onload=function(){$.postFile("/excelFile",formData,(function(result){for(var rowObj=result,fieldName={},headerName={},i=0;i<rowObj.length;i++)for(key in ______excelGrid______.addRow(),rowObj[i])for(var gridCol=______excelGrid______.__options.column,j=0;j<gridCol._columnsName.length;j++)if(gridCol._columns[j].hasOwnProperty("group")){if(gridCol._columns[j].group)for(var groupLength=gridCol._columns[j].columns.length,k=0;k<groupLength;k++)fieldName=gridCol._columns[j].columns[k].fieldName.toLowerCase(),headerName=gridCol._columns[j].columns[k].header.text.toLowerCase(),key.toLowerCase()!=fieldName&&key.toLowerCase()!=headerName||______excelGrid______.setValues(i,fieldName,rowObj[i][key])}else if(fieldName=gridCol._columns[j].fieldName.toLowerCase(),headerName=gridCol._columns[j].header.text.toLowerCase(),key.toLowerCase()==fieldName||key.toLowerCase()==headerName){______excelGrid______.setValues(i,fieldName,rowObj[i][key]);break}______excelGrid______="",callback&&callback(rowObj)}))},reader.readAsArrayBuffer(input.files[0])},$.json2Excel=function(listMap){for(var wb=XLSX.utils.book_new(),newWorksheet,wbout,headerText="",i=0;i<listMap.length;i++){for(var gridList=[],j=0;j<listMap[i].data.length;j++){for(var cols=listMap[i].grid.__options.column._columns,gridObj={},k=0;k<cols.length;k++){if(null==cols[k].visible);else if(!cols[k].visible)continue;if($.isNull(cols[k].type)||"group"!=cols[k].type){var key=cols[k].fieldName,val=listMap[i].data[j][cols[k].fieldName],obj;(obj=new Object)[key]=val,$.extend(gridObj,obj)}else for(var l=0;l<cols[k].columns.length;l++){var key=cols[k].columns[l].fieldName,val=listMap[i].data[j][cols[k].columns[l].fieldName],obj;(obj=new Object)[key]=val,$.extend(gridObj,obj)}}gridList.push(gridObj)}if(!$.isNull(listMap[i].grid)&&gridList.length>0){var cols=listMap[i].grid.__options.column._columns;newWorksheet=XLSX.utils.json_to_sheet(gridList),XLSX.utils.book_append_sheet(wb,newWorksheet,listMap[i].title);var lastCell=newWorksheet["!ref"].split(":")[1].toLowerCase(),last=lastCell.charCodeAt(0)-96;lastCell.charCodeAt(1)>96&&(last=last+lastCell.charCodeAt(1)-96);for(var k=0;k<last;k++)for(var tempName=newWorksheet[String.fromCharCode(k+65)+"1"].v,j=0;j<cols.length;j++)if($.isNull(cols[j].type)||"group"!=cols[j].type){if(null!=cols[j].fieldName&&cols[j].fieldName.toLowerCase()==tempName.toLowerCase()){newWorksheet[String.fromCharCode(k+65)+"1"].v=cols[j].header.text;break}}else{headerText=cols[j].header.text+"-";for(var l=0;l<cols[j].columns.length;l++)if(cols[j].columns[l].fieldName.toLowerCase()==tempName.toLowerCase()){newWorksheet[String.fromCharCode(k+65)+"1"].v=headerText+cols[j].columns[l].header.text;break}}}wbout=XLSX.write(wb,{bookType:"xlsx",type:"binary"})}return new Blob([s2ab(wbout)],{type:"application/octet-stream"})},$.url2Excel=function(listMap){for(var list=[],i=0;i<listMap.length;i++)$.isNull(listMap[i].param)?$.getSync(listMap[i].url,(function(data){$.isNull(listMap[i].grid)?list.push({title:listMap[i].title,data:data}):list.push({title:listMap[i].title,data:data,grid:listMap[i].grid}),i==listMap.length-1&&saveAs($.json2Excel(list),moment().format("YYYY-MM-DD")+".xlsx")})):$.getSync(listMap[i].url,listMap[i].param,(function(data){$.isNull(listMap[i].grid)?list.push({title:listMap[i].title,data:data}):list.push({title:listMap[i].title,data:data,grid:listMap[i].grid}),i==listMap.length-1&&saveAs($.json2Excel(list),moment().format("YYYY-MM-DD")+".xlsx")}))},$.callGridResize=function(){var height=$(window).height(),bottomGrid=$(document).find(".bottom-grid"),searchFormSize=0,searchFormDefaultSize=25,gridTitle=45,mesHeader=80;$(document).find(".search-form").length>0?searchFormSize=25+$(document).find(".search-form").height():$(document).find(".search-form2").length>0&&(searchFormSize=25+$(document).find(".search-form2").height());for(var i=0;i<bottomGrid.length;i++){var className=bottomGrid[i].className,len=parseInt(className.substring(className.lastIndexOf("marginB")+"marginB:".length,className.length)),offSetTop=bottomGrid[i].parentElement.offsetTop;!$.isNull(bottomGrid[i].parentElement.offsetParent)&&bottomGrid[i].parentElement.offsetParent.offsetTop>0&&bottomGrid[i].parentElement.offsetParent.offsetTop<105&&(offSetTop+=bottomGrid[i].parentElement.offsetParent.offsetTop),bottomGrid[i].style.height=window.innerHeight-offSetTop-80-45-searchFormSize-len+"px"}},$.isApprovalUrl=function(){return"approvalId"==window.location.search.replace("?","").split("=")[0]},$.loadSearchCondition=function(callback){$.isApprovalUrl()?loadApprovalSearchCondition(callback):loadRecentSearchCondition(callback)},$.makeApprovalSearchCondition=function(callback){var mainGroup=null,searchForm=document.getElementById("searchForm"),rtnUrl=window.location.origin+window.location.pathname;if($.isNull(searchForm))callback(rtnUrl);else{for(var i=0;i<searchForm.childElementCount;i++)if(searchForm.children[i].className.indexOf("main-group")>-1){mainGroup=searchForm.children[i];break}if(null!==mainGroup){var obj=new Object;obj.url=window.location.pathname,______list______=new Array,______listCount______=0,findChildHasId(mainGroup,"SAVE");for(var tab,tabs=$(document).find(".mercury-tabs")[0].children[0],i=0;i<tabs.childElementCount;i++){var item=tabs.children[i].children[0];item.className.indexOf("active")>-1&&(______list______["sysMyRecentSearchList["+______listCount______+"].id"]="selectedTabId",______list______["sysMyRecentSearchList["+______listCount______+"].value"]=item.hash,______listCount______++)}$.extend(obj,______list______),$.save("/sys/menu/sysMenu/approval/saveSysApprovalSearchList",obj,(function(result){______list______=null,______listCount______=0,result.rtn>0&&(rtnUrl=window.location.origin+result.url),callback(rtnUrl)}))}else callback(rtnUrl)}},$.searchFormBtnClick=function(searchForm,target){var mainGroup=null,available=!1;if(!($.isNull(searchForm)||target.length>1)){for(var i=0;i<searchForm.childElementCount;i++)if(searchForm.children[i].className.indexOf("main-group")>-1){mainGroup=searchForm.children[i];break}if(null!==mainGroup){for(var i=0;i<searchForm.childElementCount;i++)if(searchForm.children[i].className.indexOf("btn-group")>-1)for(var j=0;j<searchForm.children[i].childElementCount;j++)if(target[0]==searchForm.children[i].children[j]){available=!0;break}if(available){var obj=new Object;obj.url=window.location.pathname,target[0].id.toUpperCase().indexOf("SEARCH")>-1&&(______list______=new Array,______listCount______=0,findChildHasId(mainGroup,"SAVE"),$.extend(obj,______list______),$.save("/sys/menu/sysMenu/recent/saveSysMyRecentSearchList",obj,(function(result){______list______=null,______listCount______=0})))}}}},$.fn.setOptions=function(data,options){var value="code",textField="descr",select=this,drawAll=!0,drawChoice=!0,defaultText=old.js.common.all,defaultValue="",isCode=!1,text;options&&(options.value&&(value=options.value),options.text&&(textField=options.text),options.defaultText&&(defaultText=options.defaultText),options.defaultValue&&(defaultValue=options.defaultValue),0==options.all?drawAll=!1:options.all&&(defaultText=options.all),0==options.choice?drawChoice=!1:options.choice&&(defaultText=options.choice),options.code&&(isCode=options.code)),0!=drawAll&&!1!==drawChoice&&$(select).append('<option value="'+defaultValue+'">'+defaultText+"</option>"),$.each(data,(function(idx,detail){text=detail[textField],isCode&&(text="["+detail[value]+"] "+text),$(select).append('<option value="'+detail[value]+'">'+text+"</option>")}))},$.fn.postReport=function(src,params){$(this).report(src,params,!0)},$.fn.report=function(src,params,isPost){activeDialogError=!1;var actionUrl="",form=$(this);"boolean"==typeof params&&(isPost=params,params=null),void 0===isPost&&(isPost=!1);var authInfo=$.getTokenAuth("report");if(0!=authInfo.isAuth)if(actionUrl=authInfo.serverURL+src,0==isPost)form.attr("src",actionUrl+"?lang="+_mes_lang+"&"+$.param(params));else{var iframeForm='<iframe id="ifrm_report_lang" name="ifrm_ifrm_report_lang" src="" width="0px" height="0px" style="display:none"/>';$("body").append(iframeForm),$("#ifrm_report_lang").attr("src",authInfo.serverURL+"/ready?lang="+_mes_lang);var reportInterval=setInterval((function(){if(_readyList.index&&1==_readyList.index){clearInterval(reportInterval);var template='<form id="_reportForm" method="post" action="'+actionUrl+'"target="'+form.attr("id")+'"><textarea name="reportParams">'+JSON.stringify(params)+"</textarea></form>";$("body").append(template),$("#_reportForm").submit(),$("#_reportForm").remove()}}),2e3)}},$.fn.reportExport=function(src,params,isPost){activeDialogError=!1;var actionUrl="",form=$(this);"boolean"==typeof params&&(isPost=params,params=null),void 0===isPost&&(isPost=!1);var authInfo=$.getTokenAuth("report");if(0!=authInfo.isAuth)if(actionUrl=authInfo.serverURL+src,0==isPost)form.attr("src",actionUrl+"?lang="+_mes_lang+"&"+$.param(params));else{var iframeForm='<iframe id="ifrm_report_lang" name="ifrm_ifrm_report_lang" src="" width="0px" height="0px" style="display:none"/>';$("body").append(iframeForm),$("#ifrm_report_lang").attr("src",authInfo.serverURL+"/ready?lang="+_mes_lang);var reportInterval=setInterval((function(){if(_readyList.index&&1==_readyList.index){clearInterval(reportInterval);var template='<form id="_reportForm" method="post" action="'+actionUrl+'"target="'+form.attr("id")+'"><textarea name="reportParams">'+JSON.stringify(params)+"</textarea></form>";$("body").append(template),$("#_reportForm").submit(),$("#_reportForm").remove()}}),2e3)}},$.fnSaveAsPdf=function(target,direction,fileName){null!=target&&""!=target||(target=document.body),html2canvas(target).then((function(canvas){var imgData=canvas.toDataURL("image/png"),imgWidth,pageHeight,imgHeight,heightLeft,dir,margin;null==direction||""==direction?(imgWidth=280,margin=10,pageHeight=297/1.414,heightLeft=imgHeight=canvas.height*imgWidth/canvas.width,dir="landscape"):(imgWidth=210,margin=0,pageHeight=297,heightLeft=imgHeight=canvas.height*imgWidth/canvas.width,dir="p");var doc=new jsPDF({orientation:dir,unit:"mm",format:"a4"}),position=0;for(doc.addImage(imgData,"PNG",margin,position,imgWidth,imgHeight),heightLeft-=pageHeight;heightLeft>=20;)position=heightLeft-imgHeight,doc.addPage(),doc.addImage(imgData,"PNG",margin,position,imgWidth,imgHeight),heightLeft-=pageHeight;doc.save(fileName+"_"+moment().format("YYYY-MM-DD")+".pdf")}))},$.getChartStepValue=function(min,max,stepCount){var minVal,maxVal,max_min,length_max_min,pow_max_min,rtnVal;return max-min>10?(minVal=min,maxVal=max):max-min<0?(minVal=max,maxVal=min):(minVal=1e4*min,maxVal=1e4*max),pow_max_min=(length_max_min=(max_min=Math.round((maxVal-minVal)/stepCount)).toString().length)>0?Math.pow(10,length_max_min-1):1,rtnVal=Math.round(max_min/pow_max_min)*pow_max_min,max-min>10?rtnVal=rtnVal:max-min<0?rtnVal=rtnVal:rtnVal/=1e4,rtnVal},$.getTokenAuth=function(type){var isAuth=!1,serverURL="";return $.getSync("/token/"+type,(function(reportInfo){$.ajax({url:reportInfo.authURL,type:"GET",async:!1,xhrFields:{withCredentials:!0},success:function(data){"200"==data.resultCode&&(isAuth=!0,serverURL=reportInfo.serverURL)}})})),{isAuth:isAuth,serverURL:serverURL}},$.getReportUrl=function(src,params,isPost){var url,authInfo,authInfo;if(activeDialogError=!1,"boolean"==typeof params&&(isPost=params,params=null),void 0===isPost&&(isPost=!1),0!=(authInfo=$.getTokenAuth("report")).isAuth)return authInfo.serverURL+src+"?lang="+_mes_lang+"&"+$.param(params)},$.urlParam=function(name){var results=new RegExp("[?&amp;]"+name+"=([^&amp;#]*)").exec(window.location.href);return results?results[1]||0:null},$.toCamelCase=function(name){var result="",names=[],fristPart,secondPart,word;if(1==(names=(name=name.toLowerCase()).split("_")).length)return name.toLowerCase();for(var i=0;i<names.length;i++)word=names[i],0!=i?(result+=(fristPart=word.substring(0,1)).toUpperCase(),result+=secondPart=word.substring(1,word.length)):result+=word.toLowerCase();return result},$.fn.clearFile=function(){$(this).find(".file-list tbody").html(""),$(this).removeData("fileId"),$(this).removeAttr("data-file-id")},$.fn.valid=function(callback,callbackFalse){var value,element,messages,elementValid,length,isValid=!0,iscallbackFalse=!0,minDate=new Date("1900-01-01"),maxDate=new Date("2999-12-31");return void 0!==callbackFalse&&0==callbackFalse&&(iscallbackFalse=!1),$(this).find("input, select, textarea").each((function(){if(messages="",elementValid=!0,element=$(this),value="textarea"==element.attr("tagName")?element.html():element.val(),element.removeClass("error"),element.attr("title",""),element.attr("required")&&(null!=value&&""!=value||(messages+=message.valid.required,elementValid=!1)),length=element.data("length"),elementValid&&length&&(value.length<length[0]||value.length>length[1])&&(messages=messages+message.valid.range+" ("+length[0]+"~"+length[1]+")",elementValid=!1),elementValid&&element.data("min")&&value<element.data("min")&&(messages+=message.valid.min,elementValid=!1),elementValid&&element.data("max")&&value>element.data("max")&&(messages+=message.valid.max,elementValid=!1),elementValid&&(element.hasClass("date-range")||element.hasClass("date-picker"))){var valueDate=new Date(value);(minDate>valueDate||maxDate<valueDate)&&(messages+=message.valid.range,elementValid=!1)}if(elementValid&&element.data("from")){var toDate=new Date(value),fromDate=new Date($("#"+element.data("from")).val());(toDate==fromDate||fromDate>toDate)&&(messages+=message.valid.daterange,elementValid=!1)}0==elementValid&&(element.addClass("error"),element.attr("title",messages),isValid=!1)})),(!iscallbackFalse&&isValid||iscallbackFalse&&callback)&&callback(isValid),isValid},$.fn.validClear=function(){$(this).find(".error").each((function(){$(this).removeClass("error")}))},$.message=function(key){var value=eval(key),phvList,i;if(null===value)return"["+key+"]";if(2==arguments.length&&$.isArray(arguments[1])&&(phvList=arguments[1]),"string"==typeof value){for(i=0;-1!=(i=value.indexOf("\\",i));)value="t"==value.charAt(i+1)?value.substring(0,i)+"\t"+value.substring(2+i++):"r"==value.charAt(i+1)?value.substring(0,i)+"\r"+value.substring(2+i++):"n"==value.charAt(i+1)?value.substring(0,i)+"\n"+value.substring(2+i++):"f"==value.charAt(i+1)?value.substring(0,i)+"\f"+value.substring(2+i++):"\\"==value.charAt(i+1)?value.substring(0,i)+"\\"+value.substring(2+i++):value.substring(0,i)+value.substring(i+1);var arr=[],j,index;for(i=0;i<value.length;)if("'"==value.charAt(i))if(i==value.length-1)value=value.substring(0,i);else if("'"==value.charAt(i+1))value=value.substring(0,i)+value.substring(++i);else{for(j=i+2;-1!=(j=value.indexOf("'",j));){if(j==value.length-1||"'"!=value.charAt(j+1)){value=value.substring(0,i)+value.substring(i+1,j)+value.substring(j+1),i=j-1;break}value=value.substring(0,j)+value.substring(++j)}-1==j&&(value=value.substring(0,i)+value.substring(i+1))}else if("{"==value.charAt(i))if(j=value.indexOf("}",i+1),-1==j)i++;else if(index=parseInt(value.substring(i+1,j)),!isNaN(index)&&index>=0){var s=value.substring(0,i);""!==s&&arr.push(s),arr.push(index),i=0,value=value.substring(j+1)}else i=j+1;else i++;""!==value&&arr.push(value),value=arr}if(0===value.length)return"";if(1==value.length&&"string"==typeof value[0])return value[0];var str="";for(i=0,j=value.length;i<j;i++)"string"==typeof value[i]?str+=value[i]:phvList&&value[i]<phvList.length?str+=phvList[value[i]]:!phvList&&value[i]+1<arguments.length?str+=arguments[value[i]+1]:str+="{"+value[i]+"}";return str}}(jQuery);var Code=function(){var groupCodes=[],URL="/api/codes";function Code(){}function getAjaxCode(param){var codeData;return $.getSync(URL,param,(function(data){codeData=data})),codeData}function convertObject(codeData){var codeObject={},key;return $.each(codeData,(function(idx,codes){codeObject[codes.groupCode]=codes.commonCodes})),codeObject}return Code.prototype={put:function(code){return groupCodes.push({groupCode:code}),this},get:function(path,param){return URL+="/"+path,this._codeObject=getAjaxCode(param),this.getCode()},getList:function(param){return param||(param={}),groupCodes.length>0&&$.extend(param,$.convertJsonList("commonCodes",groupCodes)),this._codeObject=convertObject(getAjaxCode(param)),this.getCode()},getCode:function(){return this._codeObject}},Code}();$.fn.setTabFocus=function(index){if(!$.isNull(index)){var objId="#"+$(this).attr("id")+" ul li a";$(objId).eq(index).click()}},$.fn.getTabIndex=function(){var objId="#"+$(this).attr("id")+" ul li .active";return $(objId).closest("li").data("tabNo")};var Storage={EMPLOYEE:["sample","employee"],PROD:["prod"]};function setProgressBar(){if(!$("#loading").length){var $container=$("<div>",{id:"loading",class:"ukload",style:"display: none"}),$wrapper=$("<div>",{class:"ukload_box"}),$ibox=$("<div>",{class:"ukspiner"}),$text=$("<div>",{class:"ukload_text",text:Ajax.defaults.progressBarText}),$background=$("<div>",{class:"bg"});$wrapper.append($ibox).append($text),$container.append($wrapper).append($background).appendTo("body"),$("#loading").css({width:"100%",height:"100%",position:"fixed",zIndex:1e7,top:0,left:0,right:0,bottom:0,margin:"auto"}),$("#loading .bg").css({background:"#000000",opacity:0,width:"100%",height:"100%",position:"absolute",top:0}),$("#loading > div:first").css({width:"250px",height:"75px",textAlign:"center",position:"fixed",top:0,left:0,right:0,bottom:0,margin:"auto",fontSize:"16px",zIndex:10,color:"#000000"})}$("#loading .bg").height("100%"),$("#loading").show(),$("body").css("cursor","wait")}function destroyProgressBar(){$("#loading").hide(),$("body").css("cursor","default")}var Ajax={defaults:{enabledProgressBar:!1,progressBarText:""},setProgressBarText:function(text){Ajax.defaults.progressBarText=text},enableProgressBar:function(){$(document).ajaxStart((function(){Ajax.defaults.enabledProgressBar=!0,setProgressBar()})),$(document).ajaxStop((function(){destroyProgressBar()}))},enableErrorHandler:function(){$(document).ajaxError((function(evnet,xhr,settings,thrownError){var response;response=xhr.responseText?JSON.parse(xhr.responseText):{},console.log(response,xhr,settings,thrownError),"0"==xhr.status&&(response.message=base.server.connection.fail),"404"==xhr.status&&(response.message=base.security.notfound),"419"==xhr.status&&(response.message=base.security.session.invalid),activeDialogError?$.error(response.message,(function(){"419"==xhr.status&&(self!=top?window.parent.location.href="/":location.href="/")})):(alert(response.message),"419"==xhr.status&&(self!=top?window.parent.location.href="/":location.href="/"))}))}};function linkSelectBox(_url,param,coupleId,allFlag){var selector="#"+coupleId,subCoupleId=$(selector).attr("data-coupleId"),contents="",option="";1==allFlag?(option=common.general.all,contents+="<option value=''>"+option+"</option>"):0==allFlag?(option=biz.general.select,contents+="<option value=''>"+option+"</option>"):contents="",$.get(_url,param,(function(list){$(selector).empty(),$.each(list,(function(idx,data){var code=data.code,descr=data.descr;contents+="<option value="+code+">"+descr+"</option>"})),list&&$(selector).append(contents)}))}var LinkSelect=function(){function LinkSelect(){return this._selectList={},this._selectObject={},this}var bind=function(id,selectData,options){var valueField="code",textField="descr",selectFieldOptions="",isCode=!1,text,customTag;options||(options={}),options.value&&(valueField=options.value),options.text&&(textField=options.text),options.code&&(isCode=options.code);var selector=$("#"+id);selector.html(""),"select"==options.all?selectFieldOptions='<option value="" selected>'+biz.general.select+"</option>":"all"==options.all&&(selectFieldOptions='<option value="" selected>'+common.general.all+"</option>"),selectData.length<1?selector.append(selectFieldOptions):($.each(selectData,(function(idx,value){if(customTag="",text=value[textField],1==isCode&&(text="["+value[valueField]+"] "+text),null!=options.datas){var jbString,jbSplit=options.datas.split(",");for(var i in jbSplit)customTag+="data-"+jbSplit[i]+'="'+$.trim(value[jbSplit[i]])+'"'}selectFieldOptions+='<option value="'+value[valueField]+'" '+customTag+" >"+text+"</option>"})),selector.append(selectFieldOptions))},bindEvent=function(linkSelect,selectList,selectObject){var callback=linkSelect.__change,selectBox,options;$.each(selectList,(function(idx,select){selectBox=$("#"+select.id),options=select.options;var multiCallback=$(this).data("onchange");selectBox.attr("multiple")?($("#"+select.id).multipleSelect({checkAll:!0,isLink:!0,onClose:function(){childBind(selectObject,selectList,select.id),callback&&callback(select.id),multiCallback&&window[multiCallback]()}}),options.checkAll&&1==options.checkAll&&selectBox.multipleSelect("checkAll"),options&&options.setValues&&selectBox.multipleSelect("setSelects",options.setValues)):($(document).on("change","#"+select.id,(function(){childBind(selectObject,selectList,select.id),callback&&callback(select.id)})),options&&options.setValues&&selectBox.val(options.setValues)),triggerChangeEvent(select.id)}))},childBind=function(selectObject,selectList,parentId){var params,options;selectObject[parentId]&&$.each(selectObject[parentId],(function(idx,select){params={},(options=select.options)&&options.param&&$.extend(params,options.param),$.extend(params,getParentsValue(selectList,parentId)),$.getSync(select.url,params,(function(data){bind(select.id,data,select.options)})),triggerChangeEvent(select.id),setMultiselectOption(selectObject,selectList,parentId)}))},setMultiselectOption=function(selectObject,selectList,parentId){var options;selectObject[parentId]&&$.each(selectObject[parentId],(function(idx,select){if(!(options=select.options))return!0;options.checkAll&&1==options.checkAll&&$("#"+select.id).multipleSelect("checkAll")}))},triggerChangeEvent=function(id){var selector=$("#"+id);selector.attr("multiple")?(selector.multipleSelect("refresh"),selector.multipleSelect("close")):selector.change()},getParentsValue=function(selectList,parentId){var params={};return selectList[parentId]?(selectList[parentId].parent&&$.extend(params,getParentsValue(selectList,selectList[parentId].parent)),$.extend(params,getSelectValue(parentId,selectList[parentId])),params):params},getSelectValue=function(id,selectObject){var select=$("#"+id),param={},value=select.val(),field;if(field=void 0!==selectObject&&void 0!==selectObject.options&&void 0!==selectObject.options.field?selectObject.options.field:select.attr("name"),void 0===value||null==value)return param;if("string"==typeof value)return param[field]=value,param;for(var i=0;i<value.length;i++)param[field+"["+i+"]"]=value[i];return param};return LinkSelect.prototype={add:function(id,url,parent,options){"object"==typeof parent&&(options=parent,parent=null),"string"==typeof parent&&$.extend(options,{parent:parent});var select={id:id,url:url,parent:parent,options:options};return this._selectList[id]=select,parent&&(this._selectObject[parent]||(this._selectObject[parent]=[]),this._selectObject[parent].push(select)),1==Object.keys(this._selectList).length&&(this.firstSelect=id),this},build:function(){var select=this._selectList[this.firstSelect],params={};select.options&&select.options.param&&(params=select.options.param),$.getSync(select.url,params,(function(data){bind(select.id,data,select.options)})),bindEvent(this,this._selectList,this._selectObject)},change:function(callback){return this.__change=callback,this}},LinkSelect}();!function($){"use strict";var sprintf=function(str){var args=arguments,flag=!0,i=1;return str=str.replace(/%s/g,(function(){var arg=args[i++];return void 0===arg?(flag=!1,""):arg})),flag?str:""},removeDiacritics=function(str){for(var defaultDiacriticsRemovalMap=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}],i=0;i<defaultDiacriticsRemovalMap.length;i++)str=str.replace(defaultDiacriticsRemovalMap[i].letters,defaultDiacriticsRemovalMap[i].base);return str};function MultipleSelect($el,options){var that=this,name=$el.attr("name")||options.name||"";this.options=options,this.$el=$el.hide(),this.$label=this.$el.closest("label"),0===this.$label.length&&this.$el.attr("id")&&(this.$label=$(sprintf('label[for="%s"]',this.$el.attr("id").replace(/:/g,"\\:")))),this.$parent=$(sprintf('<div class="ms-parent %s" %s/>',$el.attr("class")||"",sprintf('title="%s"',$el.attr("title")))),this.$choice=$(sprintf(['<button type="button" class="ms-choice">','<span class="placeholder">%s</span>',"</button>"].join(""),this.options.placeholder)),this.$drop=$(sprintf('<div class="ms-drop %s"%s></div>',this.options.position,sprintf(' style="width: %s"',this.options.dropWidth))),this.$el.after(this.$parent),this.$parent.append(this.$choice),this.$parent.append(this.$drop),this.$el.prop("disabled")&&this.$choice.addClass("disabled"),this.$parent.css("width",this.options.width||this.$el.css("width")||this.$el.outerWidth()+20),this.selectAllName='data-name="selectAll'+name+'"',this.selectGroupName='data-name="selectGroup'+name+'"',this.selectItemName='data-name="selectItem'+name+'"',this.options.keepOpen||$(document).click((function(e){$(e.target)[0]!==that.$choice[0]&&$(e.target).parents(".ms-choice")[0]!==that.$choice[0]&&($(e.target)[0]===that.$drop[0]||$(e.target).parents(".ms-drop")[0]!==that.$drop[0]&&e.target!==$el[0])&&that.options.isOpen&&that.close()}))}MultipleSelect.prototype={constructor:MultipleSelect,init:function(){var that=this,$ul=$("<ul></ul>");this.$drop.html(""),this.options.filter&&this.$drop.append(['<div class="ms-search">','<input type="text" autocomplete="off" autocorrect="off" autocapitilize="off" spellcheck="false">',"</div>"].join("")),this.options.selectAll&&!this.options.single&&$ul.append(['<li class="ms-select-all">',"<label>",sprintf('<input type="checkbox" %s /> ',this.selectAllName),this.options.selectAllDelimiter[0],this.options.selectAllText,this.options.selectAllDelimiter[1],"</label>","</li>"].join("")),$.each(this.$el.children(),(function(i,elm){$ul.append(that.optionToHtml(i,elm))})),$ul.append(sprintf('<li class="ms-no-results"></li>')),this.$drop.append($ul),this.$drop.find("ul").css("max-height",this.options.maxHeight+"px"),this.$drop.find(".multiple").css("width",this.options.multipleWidth+"px"),this.$searchInput=this.$drop.find(".ms-search input"),this.$selectAll=this.$drop.find("input["+this.selectAllName+"]"),this.$selectGroups=this.$drop.find("input["+this.selectGroupName+"]"),this.$selectItems=this.$drop.find("input["+this.selectItemName+"]:enabled"),this.$disableItems=this.$drop.find("input["+this.selectItemName+"]:disabled"),this.$noResults=this.$drop.find(".ms-no-results"),this.events(),this.updateSelectAll(!0),this.update(!0),this.options.isOpen&&this.open()},optionToHtml:function(i,elm,group,groupDisabled){var that=this,$elm=$(elm),classes=$elm.attr("class")||"",title=sprintf('title="%s"',$elm.attr("title")),multiple=this.options.multiple?"multiple":"",disabled,type=this.options.single?"radio":"checkbox";if($elm.is("option")){var value=$elm.val(),text=that.options.textTemplate($elm),selected=$elm.prop("selected"),style=sprintf('style="%s"',this.options.styler(value)),$el;return disabled=groupDisabled||$elm.prop("disabled"),($el=$([sprintf('<li class="%s %s" %s %s>',multiple,classes,title,style),sprintf('<label class="%s">',disabled?"disabled":""),sprintf('<input type="%s" %s%s%s%s>',type,this.selectItemName,selected?' checked="checked"':"",disabled?' disabled="disabled"':"",sprintf(' data-group="%s"',group)),text,"</label>","</li>"].join(""))).find("input").val(value),$el}if($elm.is("optgroup")){var label=that.options.labelTemplate($elm),$group=$("<div/>");return group="group_"+i,disabled=$elm.prop("disabled"),$group.append(['<li class="group">',sprintf('<label class="optgroup %s" data-group="%s">',disabled?"disabled":"",group),this.options.hideOptgroupCheckboxes||this.options.single?"":sprintf('<input type="checkbox" %s %s>',this.selectGroupName,disabled?'disabled="disabled"':""),label,"</label>","</li>"].join("")),$.each($elm.children(),(function(i,elm){$group.append(that.optionToHtml(i,elm,group,disabled))})),$group.html()}},events:function(){var that=this,toggleOpen=function(e){e.preventDefault(),that[that.options.isOpen?"close":"open"]()};this.$label&&this.$label.off("click").on("click",(function(e){"label"===e.target.nodeName.toLowerCase()&&e.target===this&&(toggleOpen(e),that.options.filter&&that.options.isOpen||that.focus(),e.stopPropagation())})),this.$choice.off("click").on("click",toggleOpen).off("focus").on("focus",this.options.onFocus).off("blur").on("blur",this.options.onBlur),this.$parent.off("keydown").on("keydown",(function(e){switch(e.which){case 27:that.close(),that.$choice.focus()}})),this.$searchInput.off("keydown").on("keydown",(function(e){9===e.keyCode&&e.shiftKey&&that.close()})).off("keyup").on("keyup",(function(e){if(that.options.filterAcceptOnEnter&&(13===e.which||32==e.which)&&that.$searchInput.val())return that.$selectAll.click(),that.close(),void that.focus();that.filter()})),this.$selectAll.off("click").on("click",(function(){var checked=$(this).prop("checked"),$items=that.$selectItems.filter(":visible");$items.length===that.$selectItems.length?that[checked?"checkAll":"uncheckAll"]():(that.$selectGroups.prop("checked",checked),$items.prop("checked",checked),that.options[checked?"onCheckAll":"onUncheckAll"](),that.update())})),this.$selectGroups.off("click").on("click",(function(){var group=$(this).parent().attr("data-group"),$items,$children=that.$selectItems.filter(":visible").filter(sprintf('[data-group="%s"]',group)),checked=$children.length!==$children.filter(":checked").length;$children.prop("checked",checked),that.updateSelectAll(),that.update(),that.options.onOptgroupClick({label:$(this).parent().text(),checked:checked,children:$children.get(),instance:that})})),this.$selectItems.off("click").on("click",(function(){if(that.updateSelectAll(),that.update(),that.updateOptGroupSelect(),that.options.onClick({label:$(this).parent().text(),value:$(this).val(),checked:$(this).prop("checked"),instance:that}),that.options.single&&that.options.isOpen&&!that.options.keepOpen&&that.close(),that.options.single){var clickedVal=$(this).val();that.$selectItems.filter((function(){return $(this).val()!==clickedVal})).each((function(){$(this).prop("checked",!1)}))}that.update()}))},open:function(){if(!this.$choice.hasClass("disabled")){if(this.options.isOpen=!0,this.$choice.find(">div").addClass("open"),this.$drop[this.animateMethod("show")](),this.$selectAll.parent().show(),this.$noResults.hide(),this.$el.children().length||(this.$selectAll.parent().hide(),this.$noResults.show()),this.options.container){var offset=this.$drop.offset();this.$drop.appendTo($(this.options.container)),this.$drop.offset({top:offset.top,left:offset.left})}this.options.filter&&(this.$searchInput.val(""),this.$searchInput.focus(),this.filter()),this.options.onOpen()}},close:function(){this.options.isOpen=!1,this.$choice.find(">div").removeClass("open"),this.$drop[this.animateMethod("hide")](),this.options.container&&(this.$parent.append(this.$drop),this.$drop.css({top:"auto",left:"auto"})),this.options.onClose()},animateMethod:function(method){var methods;return{show:{fade:"fadeIn",slide:"slideDown"},hide:{fade:"fadeOut",slide:"slideUp"}}[method][this.options.animate]||method},update:function(isInit){var selects=this.options.displayValues?this.getSelects():this.getSelects("text"),$span=this.$choice.find(">span"),sl=selects.length;0===sl?$span.addClass("placeholder").html(this.options.placeholder):this.options.allSelected&&sl===this.$selectItems.length+this.$disableItems.length?$span.removeClass("placeholder").html(this.options.allSelected):this.options.ellipsis&&sl>this.options.minimumCountSelected?$span.removeClass("placeholder").text(selects.slice(0,this.options.minimumCountSelected).join(this.options.delimiter)+"..."):this.options.countSelected&&sl>this.options.minimumCountSelected?$span.removeClass("placeholder").html(this.options.countSelected.replace("#",selects.length).replace("%",this.$selectItems.length+this.$disableItems.length)):$span.removeClass("placeholder").text(selects.join(this.options.delimiter)),this.options.addTitle&&$span.prop("title",this.getSelects("text")),this.$el.val(this.getSelects()).trigger("change"),this.$drop.find("li").removeClass("selected"),this.$drop.find("input:checked").each((function(){$(this).parents("li").first().addClass("selected")})),isInit||this.$el.trigger("change")},updateSelectAll:function(isInit){var $items=this.$selectItems;isInit||($items=$items.filter(":visible")),this.$selectAll.prop("checked",$items.length&&$items.length===$items.filter(":checked").length),!isInit&&this.$selectAll.prop("checked")&&this.options.onCheckAll()},updateOptGroupSelect:function(){var $items=this.$selectItems.filter(":visible");$.each(this.$selectGroups,(function(i,val){var group=$(val).parent().attr("data-group"),$children=$items.filter(sprintf('[data-group="%s"]',group));$(val).prop("checked",$children.length&&$children.length===$children.filter(":checked").length)}))},getSelects:function(type){var that=this,texts=[],values=[];return this.$drop.find(sprintf("input[%s]:checked",this.selectItemName)).each((function(){texts.push($(this).parents("li").first().text()),values.push($(this).val())})),"text"===type&&this.$selectGroups.length&&(texts=[],this.$selectGroups.each((function(){var html=[],text=$.trim($(this).parent().text()),group=$(this).parent().data("group"),$children=that.$drop.find(sprintf('[%s][data-group="%s"]',that.selectItemName,group)),$selected=$children.filter(":checked");if($selected.length){if(html.push("["),html.push(text),$children.length>$selected.length){var list=[];$selected.each((function(){list.push($(this).parent().text())})),html.push(": "+list.join(", "))}html.push("]"),texts.push(html.join(""))}}))),"text"===type?texts:values},setSelects:function(values){var that=this;this.$selectItems.prop("checked",!1),this.$disableItems.prop("checked",!1),$.each(values,(function(i,value){that.$selectItems.filter(sprintf('[value="%s"]',value)).prop("checked",!0),that.$disableItems.filter(sprintf('[value="%s"]',value)).prop("checked",!0)})),this.$selectAll.prop("checked",this.$selectItems.length===this.$selectItems.filter(":checked").length+this.$disableItems.filter(":checked").length),$.each(that.$selectGroups,(function(i,val){var group=$(val).parent().attr("data-group"),$children=that.$selectItems.filter('[data-group="'+group+'"]');$(val).prop("checked",$children.length&&$children.length===$children.filter(":checked").length)})),this.update()},enable:function(){this.$choice.removeClass("disabled")},disable:function(){this.$choice.addClass("disabled")},checkAll:function(){this.$selectItems.prop("checked",!0),this.$selectGroups.prop("checked",!0),this.$selectAll.prop("checked",!0),this.update(),this.options.onCheckAll()},uncheckAll:function(){this.$selectItems.prop("checked",!1),this.$selectGroups.prop("checked",!1),this.$selectAll.prop("checked",!1),this.update(),this.options.onUncheckAll()},focus:function(){this.$choice.focus(),this.options.onFocus()},blur:function(){this.$choice.blur(),this.options.onBlur()},refresh:function(){this.init()},filter:function(){var that=this,text=$.trim(this.$searchInput.val()).toLowerCase();0===text.length?(this.$selectAll.parent().show(),this.$selectItems.parent().show(),this.$disableItems.parent().show(),this.$selectGroups.parent().show(),this.$noResults.hide()):(this.$selectItems.each((function(){var $parent=$(this).parent();$parent[removeDiacritics($parent.text().toLowerCase()).indexOf(removeDiacritics(text))<0?"hide":"show"]()})),this.$disableItems.parent().hide(),this.$selectGroups.each((function(){var $parent=$(this).parent(),group=$parent.attr("data-group"),$items;$parent[that.$selectItems.filter(":visible").filter(sprintf('[data-group="%s"]',group)).length?"show":"hide"]()})),this.$selectItems.parent().filter(":visible").length?(this.$selectAll.parent().show(),this.$noResults.hide()):(this.$selectAll.parent().hide(),this.$noResults.show())),this.updateOptGroupSelect(),this.updateSelectAll(),this.options.onFilter(text)}},$.fn.multipleSelect=function(){var option=arguments[0],args=arguments,value,allowedMethods=["getSelects","setSelects","enable","disable","open","close","checkAll","uncheckAll","focus","blur","refresh","close"];return this.each((function(){var $this=$(this),data=$this.data("multipleSelect"),options=$.extend({},$.fn.multipleSelect.defaults,$this.data(),"object"==typeof option&&option);if("object"==typeof data&&options.isLink&&1==options.isLink&&(data.options=options),data||(data=new MultipleSelect($this,options),$this.data("multipleSelect",data)),"string"==typeof option){if($.inArray(option,allowedMethods)<0)throw"Unknown method: "+option;value=data[option](args[1])}else data.init(),args[1]&&(value=data[args[1]].apply(data,[].slice.call(args,2)))})),void 0!==value?value:this},$.fn.multipleSelect.refresh=function(){$(this).multipleSelect("refresh")},$.fn.multipleSelect.defaults={name:"",isOpen:!1,placeholder:"",selectAll:!0,selectAllDelimiter:["[","]"],minimumCountSelected:3,ellipsis:!1,multiple:!1,multipleWidth:80,single:!1,filter:!1,width:void 0,dropWidth:void 0,maxHeight:250,container:null,position:"bottom",keepOpen:!1,animate:"none",displayValues:!1,delimiter:", ",addTitle:!1,filterAcceptOnEnter:!1,hideOptgroupCheckboxes:!1,selectAllText:common.general.allselect,allSelected:common.general.allselect,countSelected:"# of % selected",noMatchesFound:"No matches found",styler:function(){return!1},textTemplate:function($elm){return $elm.html()},labelTemplate:function($elm){return $elm.attr("label")},onOpen:function(){return!1},onClose:function(){return!1},onCheckAll:function(){return!1},onUncheckAll:function(){return!1},onFocus:function(){return!1},onBlur:function(){return!1},onOptgroupClick:function(){return!1},onClick:function(){return!1},onFilter:function(){return!1}},$.fn.setYearPicker=function(year){var yearSelect=$(this);year||(year=(new Date).getFullYear());for(var template="",selected,i=year-10;i<=year+2;i++)selected="",year==i&&(selected="selected"),template+='<option value="'+i+'" '+selected+">"+i+"</option>";yearSelect.append(template)},$.leftPad=function(str,padLen,padStr){for(str+="",padStr+="";str.length<padLen;)str=padStr+str;return str=str.length>=padLen?str.substring(0,padLen):str},$.isNull=function(value){return null==value||""===value||"undefined"==value||"null"==value},$.isNvl=function(value,value2){return null==value||""===value||"undefined"==value||"null"==value?null==value2?"":value2:value},$.right=function(str,size){var nStart=(str=$.isNull(str)?new String:new String(str)).length,nEnd=Number(nStart)-Number(size),rtnVal;return str.substring(nStart,nEnd)},$.left=function(str,size){return(str=$.isNull(str)?new String:new String(str)).substr(0,size)},$.convertQtyUnit=function(before,after){var convertData=1,sendData=new Object;return sendData.beforeQtyUnit=before,sendData.afterQtyUnit=after,$.getSync("/api/deliveryOrder/getConvertQtyUnit",sendData,(function(data){convertData=data})),convertData},$.getPasteMaterial=function(gridObj,itemIndex,newValue,strPlantColumn,strMaterialCodeColumn,strMaterialNameColumn,booleanIsNull,strLotColumn){$.isNull(booleanIsNull)&&(booleanIsNull=!0);var param=new Object;param.plantCode=gridObj.getValue(itemIndex,strPlantColumn),param.materialCode=newValue,$.getSync("/api/code/material/popup/getMaterial",param,(function(data){$.isNull(data)?booleanIsNull&&(gridObj.setValues(itemIndex,strMaterialCodeColumn,null),gridObj.setValues(itemIndex,strMaterialNameColumn,null),$.isNull(strLotColumn)||gridObj.setValues(itemIndex,strLotColumn,null)):(gridObj.setValues(itemIndex,strMaterialNameColumn,data[0].materialName),$.isNull(strLotColumn)||gridObj.setValues(itemIndex,strLotColumn,data[0].lot))}))},$.setPasteGridStatus=function(gridObj){gridObj.getGridView().setEditOptions({enterToNextRow:!0}),gridObj.getGridView().setCopyOptions({singleMode:!1}),gridObj.getGridView().setSelectOptions({style:"block"}),gridObj.getGridView().setPasteOptions({enableAppend:!1,eventEachRow:!0,numberChars:","}),gridObj.getGridView().onEditRowChanged=function(grid,itemIndex,dataRow,field,oldValue,newValue){},gridObj.getGridView().onEditRowPasted=function(grid,itemIndex,dataRow,fields,oldValues,newValues){}},$.setPasteMaterialName=function(gridObj,strPlantColumn,strMaterialCodeColumn,strMaterialNameColumn,booleanIsNull,strLotColumn){$.isNull(booleanIsNull)&&(booleanIsNull=!0);var columns=gridObj.getGridView().getColumnNames(),isPlant=columns.indexOf(strPlantColumn),isMaterialCode=columns.indexOf(strMaterialCodeColumn),isMaterialName=columns.indexOf(strMaterialNameColumn),isLot;columns.indexOf(strLotColumn)<0&&(strLotColumn=null),isPlant>-1&&isMaterialCode>-1&&isMaterialName>-1&&(gridObj.getGridView().onEditRowChanged=function(grid,itemIndex,dataRow,field,oldValue,newValue){field==grid.getDataProvider().getFieldIndex(strMaterialCodeColumn)&&($.isNull(newValue)?booleanIsNull&&(gridObj.setValues(itemIndex,strMaterialCodeColumn,null),gridObj.setValues(itemIndex,strMaterialNameColumn,null),$.isNull(strLotColumn)||gridObj.setValues(itemIndex,strLotColumn,null)):$.getPasteMaterial(gridObj,itemIndex,newValue,strPlantColumn,strMaterialCodeColumn,strMaterialNameColumn,booleanIsNull,strLotColumn))},gridObj.getGridView().setPasteOptions({enableAppend:!1,eventEachRow:!0}),gridObj.getGridView().onEditRowPasted=function(grid,itemIndex,dataRow,fields,oldValues,newValues){for(var i in fields){var field;if(fields[i]==grid.getDataProvider().getFieldIndex(strMaterialCodeColumn))for(var k in newValues){var newValue=newValues[k].toString();$.isNull(newValue)?booleanIsNull&&(gridObj.setValues(itemIndex,strMaterialCodeColumn,null),gridObj.setValues(itemIndex,strMaterialNameColumn,null),$.isNull(strLotColumn)||gridObj.setValues(itemIndex,strLotColumn,null)):$.getPasteMaterial(gridObj,itemIndex,newValue,strPlantColumn,strMaterialCodeColumn,strMaterialNameColumn,booleanIsNull,strLotColumn)}}})},$.getFirstParent=function(p){return p.parent&&p.parent!=p?$.getFirstParent(p.parent):p}}(jQuery);